@import "@microflash/remark-callout-directives/theme/github";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    html, body {
        @apply h-full
    }

    html {
        @apply scroll-smooth
    }

    body {
        @apply flex flex-col text-primary bg-back transition-all
    }

    .light {
        --color-back: 240 246 252;
        --color-base: 255 255 255;
        --color-elevated: 246 248 250;
        --color-primary: 31 35 40;
        --color-secondary: 101 109 118;
        --color-border: 208 215 222;
        --color-hover: 246 248 250;
        --color-active: 234 238 242;
        --color-accent: 8 145 178;
        --color-accent-hover: 14 116 144;
        --color-accent-muted: 22 78 99;
    }

    .dark {
        --color-back: 13 17 23;
        --color-base: 22 27 34;
        --color-elevated: 33 38 45;
        --color-primary: 230 237 243;
        --color-secondary: 139 148 158;
        --color-border: 48 54 61;
        --color-hover: 33 38 45;
        --color-active: 48 54 61;
        --color-accent: 34 211 238;
        --color-accent-hover: 103 232 249;
        --color-accent-muted: 14 116 144;
    }
}

@layer utilities {
    .container-global {
        @apply mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl
    }

    .menu-item {
        @apply block cursor-pointer hover:bg-hover transition-all rounded-lg py-1 line-clamp-1 active:bg-active
    }

    .base-card {
        @apply bg-base border border-border transition-all rounded-xl p-4
    }

    .article {
        @apply prose prose-neutral dark:prose-invert max-w-none
        prose-img:rounded-xl prose-img:max-h-screen prose-pre:break-words prose-pre:whitespace-pre-wrap
        prose-h2:scroll-my-20 prose-h3:scroll-my-20
        prose-a:text-accent prose-a:no-underline hover:prose-a:text-accent-hover hover:prose-a:underline
        prose-code:text-accent prose-code:bg-elevated prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none
        prose-pre:bg-elevated prose-pre:border prose-pre:border-border
        prose-headings:text-primary
        prose-strong:text-primary
        prose-blockquote:border-l-accent prose-blockquote:text-secondary
    }

    .blur-global {
        @apply backdrop-blur-[20px] backdrop-saturate-[180%] bg-back/80
    }

    .card {
        @apply bg-base border border-border rounded-xl transition-all duration-200
        hover:border-l-accent hover:border-l-2
    }

    .icon-button {
        @apply min-w-11 min-h-11 w-11 h-11 hover:bg-hover hover:text-accent transition-all rounded-full flex items-center justify-center
    }

    .badge {
        @apply border border-border bg-transparent rounded-lg transition-all px-2 py-1 flex items-center text-secondary font-mono text-sm
    }

    .accent-glow {
        @apply shadow-[0_0_20px_rgba(34,211,238,0.15)]
    }

    .accent-ring {
        @apply ring-2 ring-accent ring-offset-2 ring-offset-back
    }

    .hero-image {
        @apply w-full rounded-xl object-cover bg-elevated;
        aspect-ratio: 16 / 9;
    }

    .thumbnail {
        @apply rounded-lg object-cover bg-elevated shrink-0;
        width: 80px;
        height: 80px;
    }

    .nav-link {
        @apply min-h-11 flex items-center px-3 py-2
    }
}

.tk-footer {
    @apply hidden
}

html.dark .astro-code,
html.dark .astro-code span {
    --shiki-dark: unset;
    --shiki-dark-bg: unset;
    --shiki-dark-font-style: unset;
    --shiki-dark-font-weight: unset;
    --shiki-dark-text-decoration: unset;

    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
    /* Optional, if you also want font styles */
    font-style: var(--shiki-dark-font-style) !important;
    font-weight: var(--shiki-dark-font-weight) !important;
    text-decoration: var(--shiki-dark-text-decoration) !important;
}

.callout-title {
    align-self: end;
}

.callout {
    margin-bottom: 1rem
}

/* Reset code styling inside pre blocks */
.article pre code {
    background-color: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
    color: inherit !important;
}
